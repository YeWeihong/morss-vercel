# Morss 快速部署参考

> 本文档提供快速部署命令参考。详细说明请查看 [部署指南.md](部署指南.md)

## 最快速启动（云端）

### Vercel 一键部署（推荐）

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/YeWeihong/morss)

点击按钮，登录 Vercel，几分钟内即可完成部署。无需本地环境配置。

```bash
# 或使用 Vercel CLI
npm i -g vercel
git clone https://github.com/YeWeihong/morss.git
cd morss
vercel
```

### 本地 Docker（最简单）

```bash
# 使用官方 Docker 镜像
docker run -p 8000:8000 pictuga/morss

# 访问：http://localhost:8000
```

## Docker Compose（推荐）

```bash
# 1. 克隆仓库
git clone https://github.com/YeWeihong/morss.git
cd morss

# 2. 启动服务（使用官方镜像）
docker compose up -d

# 3. 或从源码构建
docker compose -f docker-compose.build.yml build
docker compose -f docker-compose.build.yml up -d

# 查看日志
docker compose logs -f

# 停止服务
docker compose down
```

## Python 安装

```bash
# 安装（推荐完整版）
pip install morss[full]

# 或从本 fork 安装
git clone https://github.com/YeWeihong/morss.git
cd morss
pip install .[full]

# 运行
morss  # 启动 Web 服务器在 http://localhost:8000
```

## 命令行使用

```bash
# 获取全文 RSS
morss http://feeds.bbci.co.uk/news/rss.xml

# 输出 JSON 格式
morss --format json http://example.com/feed.xml

# 使用缓存
morss --cache http://example.com/feed.xml
```

## 环境变量配置

```bash
# 磁盘缓存
export CACHE=diskcache
export DISKCACHE_DIR=/path/to/cache
export CACHE_SIZE=1073741824  # 1GB

# 性能调优
export MAX_ITEM=100
export MAX_TIME=60
export TIMEOUT=15

# 调试模式
export DEBUG=1
```

## systemd 服务

```bash
# 创建服务文件 /etc/systemd/system/morss.service
sudo systemctl daemon-reload
sudo systemctl enable morss
sudo systemctl start morss
sudo systemctl status morss
```

示例服务文件见 [部署指南.md - 系统服务配置](部署指南.md#系统服务配置)

## 常用 URL 格式

```
# 基本格式
http://localhost:8000/https://example.com/feed.xml

# 使用参数
http://localhost:8000/:clip/https://example.com/feed.xml
http://localhost:8000/:format=json/https://example.com/feed.xml

# 自定义 XPath（| 代表 /）
http://localhost:8000/:items=||div[@class='post']/https://example.com
```

## 工具访问

```
# 主页
http://localhost:8000/

# XPath 选择器工具
http://localhost:8000/xpath-selector.html

# 文档
http://localhost:8000/XPATH_CUSTOM_FEEDS_CN.md
http://localhost:8000/CRAWLER_ANTI_SCRAPING_CN.md
```

## 故障排查

```bash
# 检查日志
docker logs morss
journalctl -u morss -f

# 测试连接
curl http://localhost:8000/

# 检查端口
netstat -tlnp | grep 8000
```

## 相关文档

- **[部署指南.md](部署指南.md)** - 完整部署文档
- **[README.md](README.md)** - 项目说明
- **[项目流程说明.md](项目流程说明.md)** - 技术架构
- **[XPATH_CUSTOM_FEEDS_CN.md](XPATH_CUSTOM_FEEDS_CN.md)** - XPath 使用指南
- **[CRAWLER_ANTI_SCRAPING_CN.md](CRAWLER_ANTI_SCRAPING_CN.md)** - 爬虫机制说明

---

**版权声明**：本项目基于 [pictuga/morss](https://git.pictuga.com/pictuga/morss) 修改。原作者：pictuga，许可证：GNU AGPLv3
